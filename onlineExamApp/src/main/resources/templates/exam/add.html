<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head lang="en" th:replace="common/head :: head"></head>
<body>

	<div id="content">	
		<nav lang="en" th:replace="common/header :: header"></nav>
		<div class="container my-3">
			<nav aria-label="breadcrumb">
			  <ol class="breadcrumb">
			    <li class="breadcrumb-item"><a th:href="@{/exam}">&lt Exam List</a></li>
			    <li class="breadcrumb-item active" aria-current="page">Add Exam</li>
			  </ol>
			</nav>
			<div class="container">
			  <form onsubmit="calculateDuration()" th:action="@{/exam/save}" th:object="${exam}" method="post" class="need-validated">
			  <input type="hidden" th:field="*{id}">
			    <div class="form-group">
			      <label for="name">Exam Name:</label>
			      <input type="text" class="form-control" id="name" placeholder="Enter Exam name" th:field="*{name}" required>
			    </div>			  			      
			      <input hidden="hidden" id="addedBy" type="text" th:value="${user.name}" th:id="addedBy" th:name="addedBy">			 			 		 
			      <input id=lastUpdatedDate type="hidden" th:field="*{lastUpdatedDate}">			 			 		 
			    <div class="form-group">
			      <label for="start">Exam Starting Date and Time:</label>
			      <input type="datetime" class="form-control" id="start" placeholder="YYYY-MM-DD 00:00:00" th:field="*{startDateTime}" required>
			    </div>
			    <div class="form-group">
			      <label for="duration">Exam End Date and Time:</label>
			      <input type="datetime" class="form-control" id="end" placeholder="YYYY-MM-DD 00:00:00" required>
			    </div>
			    <input type="hidden" class="form-control" id="duration" th:field="*{duration}">			   			 	
			 	<button type="submit" class="btn btn-primary">Submit</button>	
			 		 	
			 	</form>
			 	 
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$('#examMenuItem').addClass('active');
		
		var today = new Date();
		
		document.getElementById("lastUpdatedDate").value = today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2);;

		function calculateDuration(){
			var endDate = document.getElementById("end").value;
			var startDate = document.getElementById("start").value;
			
			var fromDate = parseInt(new Date(startDate).getTime()/1000);
			var toDate = parseInt(new Date(endDate).getTime()/1000);
			
			
			var timeDiff = (toDate - fromDate);
			
			var days = (timeDiff/86400);
			timeDiff -= days * 86400;
			
			var hours = (timeDiff/3600) % 24;
			timeDiff -= hours * 3600;
			
			var minutes = (timeDiff/60) % 60;
			timeDiff -= minutes * 60;
			
			var seconds = timeDiff % 60;
			
			var duration = days+" days "+hours+" hours "+minutes+" minutes "+seconds+" seconds";
			
			document.getElementById("duration").value = duration;		
			
			return true;
		}
		
	</script>
	<footer lang="en" th:replace="common/footer :: footer"></footer>

</body>
</html>